plugins {
    id "com.github.node-gradle.node" version "3.5.1"
    id "java"
}

node {
    download = true
    version = "9.11.1"
    npmVersion = "5.6.0"
}

// Task to create a zip of the app
task packageZip(type: Zip) {
    from('dist') {
        include "*"
        include "bin/**"
        include "data/**"
        include "node_modules/**"
        include "public/**"
        include "routes/**"
        include "views/**"
        include "src/**"
    }
    destinationDirectory = file("$buildDir/dist")
    archiveBaseName = "trainScheduleAGAIN"
}

// Declare task dependencies
build.dependsOn(packageZip)
packageZip.dependsOn(npm_build)
npm_build.dependsOn(npm_test)
npm_test.dependsOn(npmInstall)
npm_build.dependsOn(npmInstall)

